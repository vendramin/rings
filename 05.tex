%\section{Lecture -- Week 5}

The following picture shows 
the relationships between 
different classes of commutative domains:
\begin{figure}[ht]
\centering
\begin{tikzpicture}[node distance=4mm, >=latex',
block/.style = {draw, rectangle, minimum height=10mm, minimum width=28mm,align=center}]
    \node [block]                      (E)     {Euclidean};
    \node [block, right=of E]       (P)   {Principal};
    \node [block, right=of P]     (UF)  {Unique factorization};
    \node [block, below=of UF]    (F) {Factorization};
    \node [block, below=of P]     (N)  {Noetherian};
    \path[draw,->] (E)      edge (P)
                   (P)    edge (UF)
                   (UF)   edge (F)
                   (P)       edge (N)
                   (N)   edge (F)
                    ;
    \end{tikzpicture}
\end{figure}

We also know that the  
reverse implications do not hold. 

\section{Fermat's Christmas theorem}

It is time to give a very nice number-theoretical application.

\begin{theorem}[Fermat]
\index{Fermat's theorem}
\label{thm:Fermat}
	Let $p\in\Z_{>0}$ be a prime number. The following statements are equivalent:
	\begin{enumerate}
	    \item $p=2$ or $p\equiv1\bmod 4$.
	    \item There exists $a\in\Z$ such that $a^2\equiv-1\bmod p$.
	    \item $p$ is not irreducible in $\Z[i]$.
	    \item $p=a^2+b^2$ for some $a,b\in\Z$.
	\end{enumerate}
\end{theorem}

\begin{proof}
    We first prove that $1)\implies 2)$. If $p=2$, take $a=1$. If $p=4k+1$ for some $k\in\Z$, then
    by Fermat's little theorem, the polynomial 
    $X^{p-1}-1\in(\Z/p)[X]$ has roots $1,2,\dots,p-1$. Write
    \[
    (X-1)(X-2)\cdots (X-(p-1))=X^{p-1}-1=X^{4k}-1=(X^{2k}+1)(X^{2k}-1)
    \]
    in $(\Z/p)[X]$. Since $p$ is prime, $\Z/p$ is a field, and hence 
    $(\Z/p)[X]$ is a unique factorization domain (because it is euclidean). Thus 
    there exists $\alpha\in\Z/p$ such that $\alpha^{2k}+1=0$. To finish the proof
    take $a=\alpha^k$. 
    
    We now prove that $2)\implies 3)$. If $a^2\equiv-1\bmod p$, then $a^2+1=kp$ 
    for some $k\in\Z$. Since $(a-i)(a+i)=a^2+1=kp$, then $p$ divides $(a-i)(a+i)$. Let us prove that $p$ is not prime in $\Z[i]$. 
    We claim that $p$ does not divide $a-i$ in $\Z[i]$. Indeed, if $p\mid a-i$, then
    $a-i=p(e+fi)$ for some $e,f\in\Z$ and this implies that $1=pf$, a contradiction. Similarly,
    $p$ does not divide $a+i$. Thus $p$ is not prime in $\Z[i]$ 
    and hence it is not irreducible in $\Z[i]$ (because in $\Z[i]$ primes and irreducible coincide). 
    
    We now prove that $3)\implies 4)$. If $p=(a+bi)(c+di)$ with $a+bi\not\in\mathcal{U}(\Z[i])$
    and  $c+di\not\in\mathcal{U}(\Z[i])$, then
    \[
    p^2=\norm(p)=\norm(a+bi)\norm(c+di)=(a^2+b^2)(c^2+d^2)
    \]
    in $\Z$. Since $\Z$ has unique factorization, it follows that $p=a^2+b^2$. 
    
    Finally, we prove that $4)\implies 1)$. 
    The only possible remainders after division by four are $0,1,2$ and $3$.  
    For all $a$, either $a^2\equiv 0\bmod 4$ or $a^2\equiv 1\bmod 4$. 
    If $p\equiv3\bmod 4$, then $p$ is never a sum of two squares, as 
    $a^2+b^2\equiv 0\bmod 4$, $a^2+b^2\equiv 1\bmod 4$ or $a^2+b^2\equiv 2\bmod 4$. 
\end{proof}

\begin{optional}
An alternative proof of the implication 
$1)\implies 2)$ goes as follows: if $p=4k+1$ is prime, then 
$x=(2k)!$ is such that $x^2\equiv -1\bmod p$. By Wilson's theorem, 
\[
(p-1)! = (4k)!\equiv \bmod p.
\]
Moreover,  
\begin{align*}
(4k)!&\equiv(4k)(4k-1)\cdots(2k+2)(2k+1)(2k)(2k-1)\cdots1\bmod p\\
&\equiv-1(-2)\cdots(-2k+1)(-2k)(2k)(2k-1)\cdots1\bmod p\\
&\equiv(-1)^{2k}(2k)!(2k)!\bmod p.
\end{align*}
Hence $x=(2k)!$ is such that $x^2\equiv -1\bmod p$.
\end{optional}

\begin{exercise}
    Decompose the prime 41 as a sum of two squares. 
\end{exercise}

In 1625, Girard stated without proof a result characterizing which integers can be expressed as the sum of two squares. Later, in a letter to Mersenne dated December 25, Fermat presented several improvements and claimed to have proved the result (this is the ``Christmas Letter''). Euler later published the first rigorous proof, explicitly acknowledging Fermat’s earlier work.

\begin{optional}
The previous exercise can be solved by using computers and 
a beautiful formula of Gauss that uses binomial coefficients. Let $p=4k+1$ be a prime number. 
If 
\[
a=\left\langle \frac12\binom{2k}{k}\right\rangle, 
\quad
b=\langle (2k)!a\rangle,
\]
where $\langle x\rangle$ denotes the 
residue of $x$ modulo $p$ of absolute value smaller than $p/2$, 
then it follows that $p=a^2+b^2$. Simple and beautiful as it is, Gauss' formula does not seem to be of any real computational value. 
\end{optional}

In \cite{MR1041889}, the author employs the Euclidean algorithm to determine efficiently 
the decomposition of a prime number $p=4k+1$ as the sum of two squares.

\begin{exercise}
\label{xca:p=3(4)}
    Let $\alpha\in\Z[i]$ be such that $\norm(\alpha)=p^2$ 
    for some prime number $p\in\Z$ with $p\equiv3\bmod 4$. 
    Prove that $\alpha$ is irreducible. 
\end{exercise}

\begin{exercise}
    \label{xca:p=1(4)}
    Let $p\in\Z$ be a prime number such that $p\equiv1\bmod 4$.
    Then $p=\alpha\overline{\alpha}$
    for some $\alpha\in\Z[i]$ irreducible. 
\end{exercise}

\begin{exercise}
\label{xca:Z[i]irreducibles}
Find the irreducible elements of $\Z[i]$. 
\end{exercise}

As a consequence of Theorem \ref{thm:Fermat}
one can prove the following result: An integer $\geq2$ can be written as a sum of two squares if and only if its prime decomposition contains no factor $p^k$, where 
$p\equiv 3\bmod 4$ 
and $k$ is odd. 

\begin{optional}
The numbers that can be represented as the sums of two squares form the integer sequence \href{https://oeis.org/A001481}{A001481}: 
\[
0, 1, 2, 4, 5, 8, 9, 10, 13, 16, 17, 18, 20, 25, 26, 29, 32,\dots 
\] 
They form the set of all norms of Gaussian integers. 
\end{optional}

\begin{bonus}[Eisenstein integers]
\index{Eisenstein integers}
    %This exercise is about \emph{Eisenstein integers}. 
    \label{xca:Eisenstein}
    Let $\omega=e^{2\pi i/3}\in\C$ and 
    \[
    R=\Z[\omega]=\{a+b\omega:a,b\in\Z\}.
    \]
    Prove the following statements:
    \begin{enumerate}
        \item The map 
        \[
        N\colon R\to\Z_{\geq0},
        \quad
        \norm(a+b\omega)=a^2-ab+b^2,
        \]
        is multiplicative and 
        satisfies $\norm(\alpha)=\alpha\overline{\alpha}$
        for all $\alpha\in R$. 
        \item $\mathcal{U}(R)=\{1,-1,\omega,-\omega,\omega^2,-\omega^2\}$.
        \item $R$ is a euclidean domain.
        \item If $\norm(\alpha)$ is a prime number, then $\alpha$ is irreducible. 
        \item If $\norm(\alpha)=p^2$ for some 
            prime number $p$ with $p\equiv 2\bmod 3$, then 
            $\alpha$ is irreducible. 
        \item If $p\equiv 1\bmod 3$, then 
            $p=\gamma\overline{\gamma}$ for some 
            irreducible $\gamma\in R$.
        \item Up to multiplication by units, 
            the irreducible elements of $R$ are $1-2\omega$, 
            $a+b\omega$ with $a^2-ab+b^2=p$ and $p\equiv 1\bmod 3$, 
            and prime numbers $p\in\Z$ with $p\equiv 2\bmod 3$.
    \end{enumerate}
\end{bonus}


\section{Zorn's lemma}

\begin{definition}
\index{Poset}
\index{Partially ordered set}
A non-empty set $R$ is said to be a \emph{partially ordered set} (or \emph{poset}, for short) 
if there is a subset $X\subseteq R\times R$ such that
\begin{enumerate}
    \item $(r,r)\in X$ for all $r\in R$, 
    \item if $(r,s)\in X$ and $(s,t)\in X$, then $(r,t)\in X$, and 
    \item if $(r,s)\in X$ and $(s,r)\in X$, then $r=s$. 
\end{enumerate}
\end{definition}

The set $X$ is a partial order relation on $R$.  
We will use the following notation: $(r,s)\in X$ if and only if $r\leq s$. Moreover, 
$r<s$ if and only if $r\leq s$ and $r\ne s$. When we say that $R$ is a poset, we implicitly denote the partial order relation on $R$ by the symbol $\leq$. With this notation, the conditions
needed to define a poset are the following:
\begin{enumerate}
    \item $r\leq r$ for all $r\in R$,
    \item if $r\leq s$ and $s\leq t$, then $r\leq t$, and 
    \item if $r\leq s$ and $s\leq r$, then $r=s$. 
\end{enumerate}

\begin{definition}
Let $R$ be a poset and $r,s\in R$. Then $r$ and $s$ are \emph{comparable}
if either $r\leq s$ or $s\leq r$.
\end{definition}

\begin{example}
    Let $U=\{1,2,3,4,5\}$ and $T$ be the set of subsets of $U$. Then $T$ is a poset
    with the usual inclusion, that is $C\leq D$ if and only if $C\subseteq D$. The subsets
    $\{1,2\}$ and $\{3,4\}$ of $U$ are elements of $T$ that are not comparable. 
\end{example}

\index{Hasse diagram}
Is there a good pictorial representation of a poset? A \emph{Hasse diagram} is a common way to represent one. It is a graph in which the vertices represent the elements of the poset. Elements connected by an arrow are comparable, while elements not connected are incomparable. Specifically, if $x$ and $y$ are elements of a poset, we draw an arrow from $x$ to $y$ if and only if $x \neq y$ and there is no element $z$ such that $x < z < y$.

\begin{example}
   The \emph{Hasse diagram} of the set of all subsets of $\{a,b,c\}$, 
   ordered by inclusion, is the following:
\[\begin{tikzcd}
	& {\{a,b,c\}} \\
	{\{a,b\}} & {\{a,c\}} & {\{b,c\}} \\
	{\{a\}} & {\{b\}} & {\{c\}} \\
	& \emptyset
	\arrow[from=2-1, to=1-2]
	\arrow[from=2-2, to=1-2]
	\arrow[from=2-3, to=1-2]
	\arrow[from=3-1, to=2-1]
	\arrow[from=3-1, to=2-2]
	\arrow[from=3-2, to=2-1]
	\arrow[from=3-2, to=2-3]
	\arrow[from=3-3, to=2-2]
	\arrow[from=3-3, to=2-3]
	\arrow[from=4-2, to=3-1]
	\arrow[from=4-2, to=3-2]
	\arrow[from=4-2, to=3-3]
\end{tikzcd}\]
\end{example}

\begin{definition}
    Let $R$ be a poset and $r\in R$. Then $r$ is \emph{maximal} in $R$ if 
    $r\leq t$ implies $r=t$. 
\end{definition}

\begin{example}
    $\Z$ with the poset structure given by the usual ordering, has no maximal elements. 
\end{example}

\begin{example}
Let $R=\{(x,y)\in\R^2:y\leq0\}$ with $(x_1,y_1)\leq(x_2,y_2)$ if and only if $x_1=x_2$ and $y_1\leq y_2$. Then
$R$ is a poset and each $(x,0)$ is maximal. Thus $R$ has infinitely many maximal elements.
\end{example}

\begin{definition}
    Let $R$ be a poset and $S$ be a non-empty subset of $R$. An \emph{upper bound}
    for $S$ is an element $u\in R$ such that $s\leq u$ for all $s\in S$. 
\end{definition}

An upper bound for $S$ might not be an element of $S$. 

\begin{example}
    Let $S=\{6\Z,12\Z,24\Z\}$ be a subset of the set $X$ 
    of subgroups of $\Z$ partially ordered by 
    the inclusion. Then 
    $6\Z=6\Z\cup 12\Z\cup 24\Z$ is an upper bound of the subset~$S$ 
    that is not maximal in $X$. 
\end{example}

\begin{example}
    Let $R=\{\emptyset, \{1\},\{2\},\{3\},\{1,2\}\}$ partially ordered with
    the inclusion, where $R$ is considered as a subset
    of the power set of $X=\{1,2,3\}$. 
    Then $\{3\}$ and $\{1,2\}$ are maximal elements of $R$. Moreover, 
    $X$ is an upper bound for $R$. 
\end{example}


\begin{definition}
    Let $R$ be a poset. A \emph{chain} is a non-empty subset $S$ of $R$ such that
    any two elements of $S$ are comparable. 
\end{definition}

We now state \emph{Zorn's lemma}:

\begin{quote}
\index{Zorn's lemma}
\color{blue!50!black}{\textit{Let $R$ be a poset such that 
every chain in $R$ admits an upper bound in $R$. 
Then $R$ contains a maximal element.}}
\end{quote}

% It is not intuitive\footnote{The mathematician
% Jerry L. Bona has a nice joke about Zorn's lemma: 
% \textit{The Axiom of Choice is obviously true, 
% the well-ordering principle obviously false, and who can tell about Zorn's lemma?}}
% but it is logically equivalent to a more 
% intuitive statement in set theory, the Axiom of Choice, 
% which says every Cartesian product of non-empty sets is non-empty. 
% It is more an axiom than a lemma. 
% The reason for calling Zorn’s lemma a lemma rather 
% than an axiom is purely historical. 

It may not be intuitive\footnote{The mathematician
Jerry L. Bona has a nice joke about Zorn's lemma: 
\textit{The Axiom of Choice is obviously true, 
the well-ordering principle obviously false, and who can tell about Zorn's lemma?}}, but it is logically equivalent to a more intuitive statement in set theory: the \emph{Axiom of Choice}, which states that the Cartesian product of a collection of non-empty sets is non-empty. Zorn's lemma is an axiom, not a lemma. The reason it is called a lemma, rather than an axiom, is purely historical.

\begin{definition}
	\index{Ideal!maximal}
	Let $R$ be a ring. An ideal $I$ of $R$ is said to be \emph{maximal}
	if $I\ne R$ and if $J$ is an ideal of $R$ such that $I\subseteq J$, then 
	either $I=J$ or $J=R$. 
\end{definition}

If $p$ is a prime number, then $p\Z$ is a maximal ideal of $\Z$.

\begin{exercise}
Let $R$ be a commutative ring. Prove that $R$ is a 
field if and only if $\{0\}$ is a maximal ideal of $R$. 	
\end{exercise}

\begin{exercise}
\label{xca:maximal<=>field}
Let $R$ be a commutative ring and $I$ be an ideal of $R$. Prove that $I$ is maximal
if and only if $R/I$ is a field.  	
\end{exercise}

\index{Ideal!proper}
An ideal $I$ of a ring $R$ is said to be \emph{proper}
if $I\ne R$. 

\begin{theorem}[Krull]
\index{Krull's theorem}
	Let $R$ be a ring. Each proper ideal $I$ of $R$ 
	is contained in a maximal ideal. 
	In particular, all rings have maximal ideals. 	
\end{theorem}

\begin{proof}
	Let $X=\{J:J\text{ is an ideal of $R$ such that }I\subseteq J\subsetneq R\}$.
	Since $I\in X$, it follows that $X$ is non-empty. Moreover, $X$ is a poset
	with respect to inclusion. If $C$ is a chain in $X$ (for example, $C$ could be   
	an increasing sequence
	\[
	I_1\subseteq I_2\subseteq\cdots
	\]
	of proper ideals of $R$ containing $I$), then 
	$\cup_{J\in C}J$ is an upper bound for $C$, as $\cup_{J\in C}J$ is an ideal and
	$\cup_{J\in C}J\ne R$ because $1\not\in\cup_{J\in C}J$. 	Zorn's lemma implies that
	there exists a maximal element $M\in X$. We claim that $M$ is a maximal ideal of $R$. The definition
	of $X$ implies that $M$ is a proper ideal of $R$ that contains $I$. If $M_1$ is a proper ideal of $R$
	such that $M\subseteq M_1$, it follows that $I\subseteq M_1$ and hence $M_1\in X$. The maximality
	of $M$ implies that $M=M_1$.  
\end{proof}

In the proof of the previous theorem, we see that it is crucial to consider rings with 
identity. 

\begin{exercise}
	Compute the maximal ideals of $\R[X]$ and $\C[X]$. 	
\end{exercise}

One can also compute the maximal ideals of $K[X]$ for any field $K$. 

\begin{exercise}
	Let $R$ be a principal domain and $p\in R\setminus\{0\}$. 
	Then $p$ is irreducible 
	if and only if $(p)$ is maximal.	
\end{exercise}

\begin{definition}
\index{Ideal!prime}
Let $R$ be a commutative ring. A proper ideal $I$ of $R$ is said to be
\emph{prime} if $xy\in I$ implies that $x\in I$ or $y\in I$. 
\end{definition}

If $p$ is a prime number, then $p\Z$ is a prime ideal of $\Z$.

\begin{exercise}
\label{xca:prime<=>domain}
    Let $R$ be a commutative ring. 
    Prove that an ideal $I$ of $R$ is prime if and only if $R/I$ is a domain. 
\end{exercise}

\begin{exercise}
Let $R$ be a commutative ring. 
\label{xca:maximal=>prime}
\begin{enumerate}
    \item Prove that maximal ideals are prime. 
    \item Let $R=\Z[X]$. Prove that $(X)$ is a prime ideal that is not maximal.
    \item Let $R$ be a principal domain. Prove that non-zero 
    prime ideals are maximal. 
\end{enumerate}
\end{exercise}

\begin{example}
	The ideal $(X^2+2X+2)$ is maximal in $\Q[X]$ because
	\[
	X^2+2X+2=(X+1)^2+1
	\]
	has degree two and no rational roots. 
	Hence $X^2+2X+2$ is irreducible in $\Q[X]$ and it generates 
	a maximal ideal. 	
\end{example}

% \begin{exercise}
% 	Let $R$ be a commutative ring and $I$ be an ideal of $R$. Then 
% 	$I$ is maximal if and only if $R/I$ is a field. 
% \end{exercise}

\begin{example}
	Let $R=(\Z/2)[X]$ and $f(X)=X^2+X+1$. Since $f(X)$ is irreducible (because $\deg f(X)=2$ and
	$f(X)$ has no roots in $\Z/2$, it follows that $(f(X))$ is a maximal ideal. 
	Thus $R/I$ is a field. 
\end{example}

\begin{exercise}
	Compute the maximal ideals of $\Z/n$. 	
\end{exercise}

\begin{exercise}
\label{xca:Jacobson}
\index{Jacobson's radical}
	Let $R$ be a commutative ring and $J(R)$ be the intersection of all maximal ideals 
	of $R$. Prove that $x\in J(R)$ 
	if and only if $1-xy\in\mathcal{U}(R)$ for all $y\in R$. The ideal $J(R)$ is known
	as the \emph{Jacobson's radical} of $R$. Note that $J(R)\ne R$.   
\end{exercise}

We conclude the lecture with a different application of Zorn's lemma.  

\begin{bonus}
	Prove that every non-zero vector space has a basis.
\end{bonus}

The previous exercise can be used to solve the following exercises:

\begin{bonus}
\label{xca:extend}
    Every linearly independent subset of a non-zero vector space
    $V$ can be extended to a basis of $V$.
\end{bonus} 

Hint: If $X$ is a linearly independent set, a basis 
of $V$ that contains $X$ will be found as a maximal linearly independent set 
containing $X$. 

\begin{bonus}
    Let $V$ be a vector space. Prove that every subspace $U$ of $V$ is a direct summand of $V$, that is
    $V=U\oplus W$ for some subspace $W$ of $V$. 
\end{bonus}

\begin{bonus}
    Prove that every spanning set of a non-zero vector space
    contains a basis. 
\end{bonus}

\begin{bonus}
\label{xca:fx=cx}
    Prove that there exists a group homomorphism $f\colon\R\to\R$ that 
    is not of the form $f(x)=\lambda x$ for some $\lambda\in\R$. 
\end{bonus}


\begin{bonus}
\label{xca:Rn=R}
    Prove that the abelian groups $\R^n$ and $\R$ are isomorphic.
\end{bonus}

\begin{bonus}
\label{xca:aut}
    Let $G$ be a group such that $|G|>2$. Prove that $|\Aut(G)|>1$.
\end{bonus}

\section{The characteristic of a ring}

\begin{definition}
Let $R$ be a ring. If there is a least positive integer $n$ such that 
$nx=0$ for all $x\in R$, then $R$ has \emph{characteristic} $n$, i.e. $\ch R=n$. If no such $n$ exists, 
then $R$ is of characteristic zero. 
\end{definition}

Easy examples: $\ch\Z=0$ and $\ch\Z/n=n$.

\begin{proposition}
    Let $R$ be a ring such that $\ch R=n>0$,
    \begin{enumerate}
        \item The map $f\colon \Z\to R$, $m\mapsto m1$, is a ring homomorphism and $\ker f=n\Z$.  
        \item $n=\min\{k\in\Z_{>0}:k1=0\}$.
        \item If $R$ is a domain, then $n$ is a prime number.
    \end{enumerate}
\end{proposition}

\begin{proof}
    We leave 1) as an exercise. 
    
    Let us prove 2). Let $n_1=\min\{k\in\Z_{>0}:k1=0\}$. Clearly 
    $n\geq n_1$. For $x\in R$,
    \[ 
    n_1x=n_1(1x)=(n_11)x=0x=0
    \]
    and hence $n_1\geq n$. 
    
    Finally, we prove 3). If $n$ is not prime, say
    $n=rs$ with $1<r,s<n$. Then 
    \[
    0=n1=(rs)1=(r1)(s1)
    \]
    and hence $r1=0$ or $s1=0$, a contradiction. 
\end{proof}

\begin{exercise}
    Let $p$ be a prime number and 
    $R=\Z/p\times\Z/p$ be a ring with the usual point-wise operations. 
    Prove that $\ch R=p$ and that $R$ has zero divisors. 
\end{exercise}

\begin{exercise}[binomial theorem]
\index{Binomial theorem}
    Let $R$ be a commutative ring and $n\geq1$. Prove that
    if $a,b\in R$, then 
    \[
    (a+b)^n=\sum_{k=0}^n\binom{n}{k}a^kb^{n-k}.
    \]
\end{exercise}    

\begin{exercise}
\label{xca:freshman_dream}
\index{Freshman's dream}
    Let $R$ be a commutative ring of prime characteristic $p$. 
    \begin{enumerate}
        \item If $x,y\in R$, then $(x+y)^{p^n}=x^{p^n}+y^{p^n}$ for all $n\geq0$. 
        \item The map $R\to R$, $x\mapsto x^{p^n}$, is a ring homomorphism for all $n\geq0$.
    \end{enumerate}
\end{exercise}

Hint: Proceed by induction on $n$ and use the fact that the prime number $p$ divides 
$\binom{p}{k}$ for all $k\in\{1,2,\dots,p-1\}$. Alternatively, one could use
that the prime number $p$ divides $\binom{p^n}{k}$ for all 
$k\in\{1,2,\dots,p^n-1\}$. 

\begin{bonus}
\index{Non-commutative binomial theorem}
    Let $R$ be a ring and $n\geq1$. 
    For $a,b\in R$, let $A(x)=(a+b)x-xb$. 
    Prove that
    if $a,b\in R$, then 
    \[
    (a+b)^n=\sum_{k=0}^n\binom{n}{k}A^k(1)b^{n-k}.
    \] 
\end{bonus}

